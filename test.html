<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Document</title>
    </head>
    <body>
        <script>
            function f1(arg) {
                console.log('f1', arg);
                return arg;
            }
            function f2(arg) {
                console.log('f2', arg);
                return arg;
            }
            function f3(arg) {
                console.log('f3', arg);
                return arg;
            }
            f3(f2(f1('xixi')));

            function compose(...funcs) {
                if (funcs.length === 0) {
                    return arg => arg;
                }
                if (funcs.length === 1) {
                    return funcs[0];
                }
                // 这里reduce没有设置初始值，只迭代了2次，第一次a=f3 b=f2
                return funcs.reduce((a, b) => (...args) => a(b(...args)));
            }
            console.log(compose(f3, f2, f1)('omg'));
        </script>
    </body>
</html>
